<div class="body">

  <!--Header-->
  <app-header></app-header>
  
  <!-- Spinner -->
  <ngx-spinner bdColor="rgba(0,0,0,0.8)" size="large" color="#00a7f8" type="ball-spin-clockwise"></ngx-spinner>
  
  <!-- Main content -->
  <main>

    <div class="container">

      <!-- Title -->
      <div class="row">
        <div class="col s2" style="text-align: center; margin-top: 4%;">
          <span>
            <img *ngIf="userLogged.photoUrl !== undefined" [src]="userLogged.photoUrl" class="user-big-avatar" onError="this.onerror=null;this.src='/assets/user.png';"/>
            <i *ngIf="userLogged.photoUrl === undefined" class="material-icons" style="width: 150px; height: 150px;">account_circle</i>
          </span>
        </div>
        <div class="col s8">
          <h3 class="header">{{ userLogged.name }}</h3>
          <div>
            <h5>Aplicação: {{ application.name }}</h5>
            <h5>Tipo de aplicação: {{ types[application.type] }}</h5>
            <h5>Método de aplicação: {{ methods[application.method] }}</h5>
          </div>
        </div>
        <div class="col s2" style="text-align: right; margin-top: 2%;">
          <a class="waves-effect waves-light light-blue btn-large"
             (click)="onBack()">
            <i class="material-icons left">keyboard_return</i>Voltar
          </a>
        </div>
      </div>

      <div class="row">
        
        <div class="col s12">
          
          <table *ngIf="profile === 'user-profile'">
            <thead>
              <tr>
                <th style="background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Competência</th>
                <th style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Auto</th>
                <th style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Líder</th>
                <th style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Pares</th>
                <th style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Média</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let d of competenceData">
                <td [class.blue-line] = "d.name === 'Resultado'"> {{ d.name }} </td>
                <td [class.blue-line] = "d.name === 'Resultado'" style="text-align: center;"> {{ d.auto }} </td>
                <td [class.blue-line] = "d.name === 'Resultado'" style="text-align: center;"> {{ d.leader }} </td>
                <td [class.blue-line] = "d.name === 'Resultado'" style="text-align: center;"> {{ d.pair }} </td>
                <td [class.blue-line] = "d.name === 'Resultado'" style="text-align: center;" [style.background-color]="d.color"> {{ d.average }} </td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <td style="background-color: rgb(3, 155, 229, 0.2); color: #039be5;"> <span><b>{{ resultCompetenceData.name }}</b></span> </td>
                <td style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span>{{ resultCompetenceData.auto }}</span></td>
                <td style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span>{{ resultCompetenceData.leader }}</span></td>
                <td style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span>{{ resultCompetenceData.pair }}</span></td>
                <td style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span>{{ resultCompetenceData.average }}</span></td>
              </tr>
              <tr>
                <td style="background-color: rgb(3, 155, 229, 0.2); color: #039be5;" colspan="4"> <span><b>ENQUADRAMENTO 9BOX</b></span> </td>
                <td style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span><b>2B</b></span></td>
              </tr>
            </tfoot>
          </table>

          <table *ngIf="profile === 'team-profile'">
            <thead>
              <tr>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span class="th-transform">Ranking</span></th>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span class="th-transform">Média</span></th>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span class="th-transform">Média Competência</span></th>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span class="th-transform">9BOX</span></th>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;"><span class="th-transform__">Equipe</span></th>
                <th class="th-team" style="text-align: center; background-color: rgb(3, 155, 229, 0.2); color: #039be5;" *ngFor="let comp of competenceSeries"><span class="th-transform">{{ comp.name }}</span></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let r of rows; let idx = index;">
                  <td class="td-team" style="text-align: center;">{{ idx + 1 }}º</td>
                  <td class="td-team" style="text-align: center;">0</td>
                  <td class="td-team" style="text-align: center;">0</td>
                  <td class="td-team" style="text-align: center;">{{ r['$9box'] }}</td>
                  <td class="td-team" style="text-align: center;">{{ r.name }}</td>
                  <td class="td-team" style="text-align: center;" *ngFor="let comp of competenceSeries">{{ getValue(comp.order, r) }}</td>
              </tr>
            </tbody>
          </table>

        </div>
      </div>

      <div class="row">
        <div class="col s12">
          <ul class="tabs">
            <li class="tab col s4"><a class="active" href="#auto">Autoavaliação</a></li>
            <li class="tab col s4"><a href="#leader">Líder</a></li>
            <li class="tab col s4"><a href="#pair">Pares</a></li>
          </ul>
        </div>
        <div id="auto" class="col s12">

          <ul class="collapsible">
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Comentário</div>
              <div class="collapsible-body"><span>Lorem ipsum d olor sit amet.</span></div>
            </li>
            
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos fortes</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>

            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos à desenvolver</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
          </ul>

        </div>
        <div id="leader" class="col s12">

          <ul class="collapsible">
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Comentário</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
            
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos fortes</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>

            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos à desenvolver</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
          </ul>

        </div>
        <div id="pair" class="col s12">

          <ul class="collapsible">
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Comentário</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
            
            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos fortes</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>

            <li>
              <div class="collapsible-header"><i class="material-icons">chat</i>Pontos à desenvolver</div>
              <div class="collapsible-body"><span>Lorem ipsum dolor sit amet.</span></div>
            </li>
          </ul>

        </div>
      </div>

      <div class="row">
        <div class="col s12">
          <ul class="collapsible">
            <li>
              <div class="collapsible-header" style="background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Radar de competências</div>
              <div class="collapsible-body col s12">
                <app-comparison-of-results #appComparisonOfResults [data]="competenceData"></app-comparison-of-results>
              </div>
            </li>
          </ul>
        </div>
      </div>

      <div class="row">
        <div class="col s12">
          <ul class="collapsible">
            <li>
              <div class="collapsible-header" style="background-color: rgb(3, 155, 229, 0.2); color: #039be5;">Histórico de competências</div>
              <div class="collapsible-body col s12">
                <app-history-chart #historyChart [person]="person" competence="{{ '' }}" [showData]="true"></app-history-chart>
              </div>
            </li>
          </ul>
        </div>
      </div>

    </div>
  </main>

  <!-- Footer -->
  <app-footer></app-footer>

</div>